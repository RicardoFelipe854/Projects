{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\riqui\\\\Documents\\\\Llamadopacientesprojectfinal\\\\llamadodePacientesproject\\\\src\\\\components\\\\LlamadosTv.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { cachePacientes } from \"../services/apiConsumption\";\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:3001'); // Ajusta la URL según tu configuración del backend\n\n/*class SpeechSynthesis extends React.Component {\r\n  componentDidMount() {\r\n    const utterance = new SpeechSynthesisUtterance(\"Modulo de voz\");\r\n    speechSynthesis.speak(utterance);\r\n  }\r\n\r\n}*/\n\nfunction LlamadosTv() {\n  _s();\n  const [pacientes, setPacientes] = useState([]);\n  const [ultimoPaciente, setUltimoPaciente] = useState(null);\n  const handleCachePacientes = Pacientes => {\n    const paciente = {\n      nombre: Pacientes[0].nombre,\n      documentoId: Pacientes[0].cedula,\n      consultorio: Pacientes[0].consultorio,\n      nivelTriage: Pacientes[0].levelTriage\n    };\n    console.log(paciente);\n    cachePacientes(paciente).then(pacienteCache => {\n      console.log('Consultorio agregado:', pacienteCache);\n    }).catch(error => {\n      console.error('Error al agregar consultorio:', error);\n      alert(\"Error, verifique la consola.\");\n    });\n  };\n  useEffect(() => {\n    /*const speechExample = new SpeechSynthesis();\r\n    speechExample.componentDidMount();*/\n\n    // Escucha eventos de actualización de pacientes\n    socket.on('actualizarPacientesTv', nuevosPacientes => {\n      const nuevoUltimoPaciente = nuevosPacientes[0].nombre;\n      const consultorio = nuevosPacientes[0].consultorio;\n      console.log(\"nuevoUltimoPaciente\" + nuevoUltimoPaciente);\n      console.log(\"ultimoPaciente\" + ultimoPaciente);\n      if (nuevoUltimoPaciente !== ultimoPaciente) {\n        setPacientes(nuevosPacientes);\n        setUltimoPaciente(nuevoUltimoPaciente);\n        const utterance = new SpeechSynthesisUtterance(`Paciente ${nuevoUltimoPaciente} llamado a: ${consultorio}`);\n        speechSynthesis.speak(utterance);\n        handleCachePacientes(nuevosPacientes);\n      }\n    });\n    return () => {\n      // Desconecta el socket cuando el componente se desmonta\n      //socket.off('actualizarPacientes', handleActualizarPacientes);\n      // socket.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    console.log(\"Pacientes actualizados:\", pacientes);\n  }, [pacientes]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full w-full p-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex h-full w-full flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex h- w-full items-center divide-x py-6 border border-gray-300 bg-white divide-gray-300 rounded-3xl shadow-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex w-2/5 items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl font-bold tracking-wide text-slate-500\",\n              children: \"Paciente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-grow items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl font-bold tracking-wide text-slate-500\",\n              children: \"Llamado a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-flow-dense h-full w-full\",\n          children: pacientes.map((elemento, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-5 flex h-20 w-full items-center divide-x divide-white rounded-xl border border-custom-sky-blue bg-custom-sky-blue shadow-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex w-2/5 items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text text-center text-2xl font-semibold tracking-wide text-white\",\n                children: [\" \", elemento.nombre, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-grow items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-center text-2xl font-semibold tracking-wide text-white\",\n                children: [\" \", elemento.consultorio, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(LlamadosTv, \"NMK5e5gYals9FT6TmkVvNT/lRyA=\");\n_c = LlamadosTv;\nexport default LlamadosTv;\nvar _c;\n$RefreshReg$(_c, \"LlamadosTv\");","map":{"version":3,"names":["React","useEffect","useState","cachePacientes","io","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","LlamadosTv","_s","pacientes","setPacientes","ultimoPaciente","setUltimoPaciente","handleCachePacientes","Pacientes","paciente","nombre","documentoId","cedula","consultorio","nivelTriage","levelTriage","console","log","then","pacienteCache","catch","error","alert","on","nuevosPacientes","nuevoUltimoPaciente","utterance","SpeechSynthesisUtterance","speechSynthesis","speak","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","elemento","index","_c","$RefreshReg$"],"sources":["C:/Users/riqui/Documents/Llamadopacientesprojectfinal/llamadodePacientesproject/src/components/LlamadosTv.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { cachePacientes } from \"../services/apiConsumption\";\r\nimport io from 'socket.io-client';\r\n\r\nconst socket = io('http://localhost:3001'); // Ajusta la URL según tu configuración del backend\r\n\r\n/*class SpeechSynthesis extends React.Component {\r\n  componentDidMount() {\r\n    const utterance = new SpeechSynthesisUtterance(\"Modulo de voz\");\r\n    speechSynthesis.speak(utterance);\r\n  }\r\n\r\n}*/\r\n\r\nfunction LlamadosTv () {\r\n  const [pacientes, setPacientes] = useState([]);\r\n  const [ultimoPaciente, setUltimoPaciente] = useState(null);\r\n\r\n  const handleCachePacientes = (Pacientes) => {\r\n    const paciente = {\r\n      nombre: Pacientes[0].nombre,\r\n      documentoId: Pacientes[0].cedula,\r\n      consultorio: Pacientes[0].consultorio,\r\n      nivelTriage: Pacientes[0].levelTriage\r\n    };\r\n    console.log(paciente);\r\n\r\n    cachePacientes(paciente)\r\n      .then((pacienteCache) => {\r\n        console.log('Consultorio agregado:', pacienteCache);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error al agregar consultorio:', error);\r\n        alert(\"Error, verifique la consola.\");\r\n      })\r\n\r\n  };\r\n\r\n  useEffect(() => {\r\n    /*const speechExample = new SpeechSynthesis();\r\n    speechExample.componentDidMount();*/\r\n\r\n    // Escucha eventos de actualización de pacientes\r\n    socket.on('actualizarPacientesTv', (nuevosPacientes) => {\r\n      const nuevoUltimoPaciente = nuevosPacientes[0].nombre;\r\n      const consultorio = nuevosPacientes[0].consultorio;\r\n      console.log(\"nuevoUltimoPaciente\" + nuevoUltimoPaciente);\r\n      console.log(\"ultimoPaciente\" + ultimoPaciente);\r\n      if (nuevoUltimoPaciente !== ultimoPaciente){\r\n        setPacientes(nuevosPacientes);\r\n        setUltimoPaciente(nuevoUltimoPaciente);\r\n\r\n        const utterance = new SpeechSynthesisUtterance(`Paciente ${nuevoUltimoPaciente} llamado a: ${consultorio}`);\r\n        speechSynthesis.speak(utterance);\r\n        handleCachePacientes(nuevosPacientes);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      // Desconecta el socket cuando el componente se desmonta\r\n      //socket.off('actualizarPacientes', handleActualizarPacientes);\r\n      // socket.disconnect();\r\n    };\r\n  }, [] );\r\n\r\n  useEffect(() => {\r\n    console.log(\"Pacientes actualizados:\", pacientes);\r\n  }, [pacientes] );\r\n\r\n  return (\r\n    < >\r\n      <div className=\"h-full w-full p-5\">\r\n        <div className=\"flex h-full w-full flex-col\">\r\n          <div\r\n            className=\"flex h- w-full items-center divide-x py-6 border border-gray-300 bg-white divide-gray-300 rounded-3xl shadow-md\">\r\n            <div className=\"flex w-2/5 items-center justify-center\">\r\n              <span className=\"text-3xl font-bold tracking-wide text-slate-500\">Paciente</span>\r\n            </div>\r\n            <div className=\"flex flex-grow items-center justify-center\">\r\n              <span className=\"text-3xl font-bold tracking-wide text-slate-500\">Llamado a</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid-flow-dense h-full w-full\">\r\n            { pacientes.map((elemento, index) => (\r\n\r\n            <div key={index} className=\"mt-5 flex h-20 w-full items-center divide-x divide-white rounded-xl border border-custom-sky-blue bg-custom-sky-blue shadow-md\">\r\n              <div className=\"flex w-2/5 items-center justify-center\">\r\n                <span className=\"text text-center text-2xl font-semibold tracking-wide text-white\"> { elemento.nombre } </span>\r\n              </div>\r\n              <div className=\"flex flex-grow items-center justify-center\">\r\n                <span className=\"text-center text-2xl font-semibold tracking-wide text-white\"> { elemento.consultorio } </span>\r\n              </div>\r\n            </div>\r\n\r\n              ))\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    < />\r\n  );\r\n}\r\n\r\nexport default LlamadosTv;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}